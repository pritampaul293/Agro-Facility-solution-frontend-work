{"ast":null,"code":"import _objectSpread from\"H:/projecccct/Adhunik-Krishi-Khamar-Frontend-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"H:/projecccct/Adhunik-Krishi-Khamar-Frontend-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useContext,useState}from\"react\";import{Button,Container,FormGroup}from\"react-bootstrap\";import{Link,useHistory,useParams}from\"react-router-dom\";import useAuth from\"../../hooks/useAuth\";import{RemoveContext}from\"../../router/AppRoute\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var acceptedPaymentType=['bkash','rocket','nagad'];var BkashPay=function BkashPay(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Pay with BKash\",/*#__PURE__*/_jsx(\"img\",{src:\"https://download.logo.wine/logo/BKash/BKash-Logo.wine.png\",width:80,alt:\"bKash LOGO\"})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-danger\",children:\"BKash No: +8801974953486\"})]});};var RocketPay=function RocketPay(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Pay with Rocket\",/*#__PURE__*/_jsx(\"img\",{src:\"https://seeklogo.com/images/D/dutch-bangla-rocket-logo-B4D1CC458D-seeklogo.com.png\",width:80,alt:\"bKash LOGO\"})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-danger\",children:\"Rocket No: +8801974953486\"})]});};var NagadPay=function NagadPay(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Pay with Nagad\",/*#__PURE__*/_jsx(\"img\",{src:\"https://www.logo.wine/a/logo/Nagad/Nagad-Vertical-Logo.wine.svg\",width:80,alt:\"bKash LOGO\"})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-danger\",children:\"Nagad No: +8801974953486\"})]});};var PaymentMethodEle=function PaymentMethodEle(_ref){var cart=_ref.cart;var _useContext=useContext(RemoveContext),_useContext2=_slicedToArray(_useContext,2),_=_useContext2[0],handleBuy=_useContext2[1];var _useParams=useParams(),type=_useParams.type;var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),addr=_useState2[0],setAddr=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),txId=_useState4[0],setTxId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useAuth=useAuth(),user=_useAuth.user;function GetTitle(){if(type==='bkash')return/*#__PURE__*/_jsx(BkashPay,{});else if(type==='rocket')return/*#__PURE__*/_jsx(RocketPay,{});else if(type==='nagad')return/*#__PURE__*/_jsx(NagadPay,{});else return/*#__PURE__*/_jsx(_Fragment,{});}var handleSubmit=function handleSubmit(){setLoading(true);var data={shippingaddr:addr,method:type,txId:txId,cart:cart.map(function(v){return _objectSpread(_objectSpread({},v),{},{des:undefined});}),cartUser:{uid:user.uid,email:user.email}};axios.post(\"http://localhost:5000/newOrder\",data).then(function(res){setLoading(false);if(res.data.insertedId){alert(\"Order created successfully!\");handleBuy();history.push('/cart');}else{alert(\"Opps! Something is wrong!\");}});};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();handleSubmit();},children:[/*#__PURE__*/_jsx(GetTitle,{}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{className:\"input-field\",placeholder:\"Shipping Address\",onChange:function onChange(e){return setAddr(e.currentTarget.value);},required:true})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{className:\"input-field\",placeholder:\"Transaction ID\",onChange:function onChange(e){return setTxId(e.currentTarget.value);},required:true})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\",disabled:loading,className:\"submit-btn\"}),/*#__PURE__*/_jsx(Link,{to:'/buy',children:\"Change Payment Method\"})]});};var Payment=function Payment(_ref2){var cart=_ref2.cart;var _useParams2=useParams(),type=_useParams2.type;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{children:acceptedPaymentType.indexOf(type)>-1?/*#__PURE__*/_jsx(PaymentMethodEle,{cart:cart}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:\"Invalid Payment Type\"}),/*#__PURE__*/_jsx(Link,{to:'/buy',children:/*#__PURE__*/_jsx(Button,{color:\"danger\",children:\"Go back\"})})]})})});};export default Payment;","map":{"version":3,"sources":["H:/projecccct/Adhunik-Krishi-Khamar-Frontend-main/src/components/Payment/Payment.js"],"names":["axios","React","useContext","useState","Button","Container","FormGroup","Link","useHistory","useParams","useAuth","RemoveContext","acceptedPaymentType","BkashPay","RocketPay","NagadPay","PaymentMethodEle","cart","_","handleBuy","type","history","addr","setAddr","txId","setTxId","loading","setLoading","user","GetTitle","handleSubmit","data","shippingaddr","method","map","v","des","undefined","cartUser","uid","email","post","then","res","insertedId","alert","push","e","preventDefault","currentTarget","value","Payment","indexOf"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { Button, Container, FormGroup } from \"react-bootstrap\";\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport { RemoveContext } from \"../../router/AppRoute\";\r\n\r\nconst acceptedPaymentType = ['bkash', 'rocket', 'nagad'];\r\n\r\nconst BkashPay = () => {\r\n  return <>\r\n    <h4>Pay with BKash\r\n      <img src=\"https://download.logo.wine/logo/BKash/BKash-Logo.wine.png\"\r\n        width={80} alt=\"bKash LOGO\" />\r\n    </h4>\r\n    <h5 className=\"text-danger\">BKash No: +8801974953486</h5>\r\n  </>\r\n}\r\nconst RocketPay = () => {\r\n  return <>\r\n    <h4>Pay with Rocket\r\n      <img src=\"https://seeklogo.com/images/D/dutch-bangla-rocket-logo-B4D1CC458D-seeklogo.com.png\"\r\n        width={80} alt=\"bKash LOGO\" />\r\n    </h4>\r\n    <h5 className=\"text-danger\">Rocket No: +8801974953486</h5>\r\n  </>\r\n}\r\nconst NagadPay = () => {\r\n  return <>\r\n    <h4>Pay with Nagad\r\n      <img src=\"https://www.logo.wine/a/logo/Nagad/Nagad-Vertical-Logo.wine.svg\"\r\n        width={80} alt=\"bKash LOGO\" />\r\n    </h4>\r\n    <h5 className=\"text-danger\">Nagad No: +8801974953486</h5>\r\n  </>\r\n}\r\n\r\nconst PaymentMethodEle = ({ cart }) => {\r\n  const [_, handleBuy] = useContext(RemoveContext);\r\n  const { type } = useParams();\r\n  const history = useHistory();\r\n  const [addr, setAddr] = useState('')\r\n  const [txId, setTxId] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const { user } = useAuth();\r\n  function GetTitle() {\r\n    if (type === 'bkash')\r\n      return <BkashPay />\r\n    else if (type === 'rocket')\r\n      return <RocketPay />\r\n    else if (type === 'nagad')\r\n      return <NagadPay />\r\n    else return <></>\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    setLoading(true)\r\n    let data = {\r\n      shippingaddr: addr,\r\n      method: type,\r\n      txId, cart: cart.map(v => ({ ...v, des: undefined })),\r\n      cartUser: {\r\n        uid: user.uid,\r\n        email: user.email\r\n      }\r\n    }\r\n    axios.post(\"http://localhost:5000/newOrder\", data).then((res) => {\r\n      setLoading(false)\r\n      if (res.data.insertedId) {\r\n        alert(\"Order created successfully!\");\r\n        handleBuy()\r\n        history.push('/cart')\r\n      } else {\r\n        alert(\"Opps! Something is wrong!\")\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  return <form\r\n    onSubmit={(e) => {\r\n      e.preventDefault()\r\n      handleSubmit()\r\n    }}\r\n  >\r\n    <GetTitle />\r\n    <FormGroup>\r\n      <input className=\"input-field\" placeholder=\"Shipping Address\" onChange={(e) => setAddr(e.currentTarget.value)} required />\r\n    </FormGroup>\r\n    <FormGroup>\r\n      <input className=\"input-field\" placeholder=\"Transaction ID\" onChange={(e) => setTxId(e.currentTarget.value)} required />\r\n    </FormGroup>\r\n    <input type=\"submit\" value=\"Submit\" disabled={loading} className=\"submit-btn\" />\r\n    <Link to={'/buy'}>Change Payment Method</Link>\r\n  </form>\r\n\r\n}\r\n\r\nconst Payment = ({ cart }) => {\r\n  const { type } = useParams();\r\n  return <>\r\n    <Container>\r\n      {acceptedPaymentType.indexOf(type) > -1 ? <PaymentMethodEle cart={cart} /> :\r\n        <> <div className=\"alert alert-danger\" role=\"alert\" >Invalid Payment Type</div>\r\n          <Link to={'/buy'}><Button color=\"danger\">Go back</Button></Link></>}\r\n    </Container>\r\n    {/* <Footer /> */}\r\n  </>;\r\n\r\n};\r\n\r\nexport default Payment;\r\n"]},"metadata":{},"sourceType":"module"}